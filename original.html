<!Doctype>
<html>
    <head>
        <title> Rock-Paper-Scissors</title>
    </head>
    <body>
        <h1> <strong> Rock-Paper-Scissors Game</strong></h1>

        <script>

            function game(){
                let playerScore = 0, computerScore = 0;
                let gameOver = false;
                while(!gameOver){
                    const playerSelection = prompt("Enter Your Move");
                    
                    const computerSelection = computerPlay();
                    let result = playGame(playerSelection, computerSelection);
                    if(result!=""){
                        if(result.charAt(4) == "W") playerScore++;
                        else if(result.charAt(4) == "L") computerScore ++;
                        console.log(result + " Score: " + playerScore + " - " + computerScore);
                    }
                    gameOver = (playerScore >= 5 || computerScore >= 5);
                }
                let message;
                if(playerScore > computerScore) message = "You beat the Computer! : " + playerScore + " - " + computerScore;
                else message = "You lost to the Computer! : " + playerScore + " - " + computerScore;
                console.log(message);
                return message;

            }

            function playGame(playerSelection, computerSelection){
                let result;
                let player = playerSelection.toLowerCase();
                if(!(player == "rock" || player == "paper" || player == "scissors")){
                    console.log("Not a valid move. Your choices are [rock, paper, scissors]");
                    return "";
                }
                let computer = computerSelection.toLowerCase();
                if(player == computer) result = "It is a Tie!";
                else{
                    if (player == "rock" && computer == "scissors" 
                    || player == "paper" && computer == "rock"
                    || player == "scissors" && computer == "paper"){
                        result = "You Win! " + capitalizeFirstLetter(player) + " beats " + capitalizeFirstLetter(computer);
                    }
                    else result = "You Lose! " + capitalizeFirstLetter(computer) + " beats " + capitalizeFirstLetter(player); 
                    
                }
                return result;
            }

            function capitalizeFirstLetter(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            }

            function computerPlay(){
                let rand = Math.floor(Math.random()*3+1);
                let move;
                switch(rand){
                    case 1:
                        move = "rock";
                        break;
                    case 2:
                        move = "paper";
                        break;
                    case 3:
                        move = "scissors";
                        break;
                    default:
                        move = "Not Valid";
                        break;
                }
                return move;
            }


        </script>
    </body>
</html>